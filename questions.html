<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="images/logo.png">
    <title>Career Explorer - Pathify</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Link to main stylesheet -->
    <link rel="stylesheet" href="style.css">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .question-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateY(20px);
            opacity: 0;
        }
        
        .question-card.active {
            transform: translateY(0);
            opacity: 1;
        }
        
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
        
        .option-card {
            transition: all 0.2s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .option-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-color: #3b82f6;
        }
        
        .option-card.selected {
            border-color: #3b82f6;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.05));
            transform: translateY(-2px);
        }
        
        .profession-card {
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .profession-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.2);
            border-color: #3b82f6;
        }
        
        .profession-card.selected {
            border-color: #3b82f6;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1));
            transform: translateY(-5px) scale(1.02);
        }
        
        .profession-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        .profession-card:hover::before {
            left: 100%;
        }
        
        .text-input {
            color: #1f2937 !important;
            background: white !important;
            border: 2px solid #d1d5db;
            transition: all 0.3s ease;
        }
        
        .text-input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            outline: none;
        }
        
        /* Animated Robot Character */
        .robot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 120px;
            height: 160px;
            z-index: 1000;
            pointer-events: none;
        }
        
        .robot {
            position: relative;
            width: 100%;
            height: 100%;
            animation: float 3s ease-in-out infinite;
        }
        
        .robot-head {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #4F46E5, #7C3AED);
            border-radius: 50% 50% 45% 45%;
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 4px 15px rgba(79, 70, 229, 0.3);
        }
        
        .robot-eyes {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
        }
        
        .robot-eye {
            width: 8px;
            height: 8px;
            background: #ffffff;
            border-radius: 50%;
            transition: all 0.1s ease;
            position: relative;
        }
        
        .robot-eye::after {
            content: '';
            width: 4px;
            height: 4px;
            background: #000;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: all 0.1s ease;
        }
        
        .robot-body {
            width: 50px;
            height: 70px;
            background: linear-gradient(135deg, #4F46E5, #6366F1);
            border-radius: 15px;
            position: absolute;
            top: 65px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 4px 15px rgba(79, 70, 229, 0.2);
        }
        
        .robot-arm {
            width: 25px;
            height: 8px;
            background: linear-gradient(135deg, #4F46E5, #6366F1);
            border-radius: 10px;
            position: absolute;
            top: 80px;
        }
        
        .robot-arm.left {
            left: 15px;
            transform: rotate(-30deg);
            animation: think 2s ease-in-out infinite;
        }
        
        .robot-arm.right {
            right: 15px;
            transform: rotate(30deg);
        }
        
        .robot-hand {
            width: 12px;
            height: 12px;
            background: linear-gradient(135deg, #4F46E5, #6366F1);
            border-radius: 50%;
            position: absolute;
            top: 72px;
            left: 35px;
            animation: think 2s ease-in-out infinite;
        }
        
        .speech-bubble {
            position: absolute;
            top: -40px;
            left: -80px;
            background: white;
            border: 2px solid #4F46E5;
            border-radius: 15px;
            padding: 8px 12px;
            font-size: 12px;
            color: #4F46E5;
            font-weight: 600;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .speech-bubble.show {
            opacity: 1;
            transform: scale(1);
        }
        
        .speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -8px;
            right: 20px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 8px solid #4F46E5;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes think {
            0%, 100% { transform: rotate(-30deg) translateY(0px); }
            50% { transform: rotate(-25deg) translateY(-3px); }
        }
        
        .floating-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
        }
        
        .floating-shape {
            position: absolute;
            border-radius: 50%;
            filter: blur(40px);
            animation: float-bg 20s ease-in-out infinite;
        }
        
        .shape-1 {
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.1) 0%, rgba(59, 130, 246, 0.05) 70%);
            top: 10%;
            right: 10%;
            animation-delay: 0s;
        }
        
        .shape-2 {
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, rgba(147, 51, 234, 0.1) 0%, rgba(147, 51, 234, 0.05) 70%);
            bottom: 20%;
            left: 15%;
            animation-delay: 10s;
        }
        
        @keyframes float-bg {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        .question-number {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }
        
        .next-button {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            transition: all 0.3s ease;
        }
        
        .next-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.4);
        }
        
        .next-button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .summary-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }
        
        .summary-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .edit-button {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: #3b82f6;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            transition: all 0.2s ease;
        }
        
        .edit-button:hover {
            background: rgba(59, 130, 246, 0.2);
            transform: scale(1.05);
        }

        /* Hide/Show classes */
        .hidden {
            display: none !important;
        }
        
        .show {
            display: block !important;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-50 to-blue-50">
    
    <!-- Floating Background Shapes -->
    <div class="floating-background">
        <div class="floating-shape shape-1"></div>
        <div class="floating-shape shape-2"></div>
    </div>
    
    <!-- Animated Robot -->
    <div class="robot-container">
        <div class="robot" id="robot">
            <div class="robot-head"></div>
            <div class="robot-eyes" id="robotEyes">
                <div class="robot-eye left-eye" id="leftEye"></div>
                <div class="robot-eye right-eye" id="rightEye"></div>
            </div>
            <div class="robot-body"></div>
            <div class="robot-arm left"></div>
            <div class="robot-arm right"></div>
            <div class="robot-hand"></div>
            <div class="speech-bubble" id="speechBubble">I'm here to help! 🤖</div>
        </div>
    </div>
    
    <!-- Header -->
    <nav class="bg-white/90 backdrop-blur-sm border-b border-gray-200/50 sticky top-0 z-50">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center">
                        <img src="images/logo.png" alt="Pathify Logo" class="w-8 h-8">
                    </div>
                    <span class="text-xl font-bold text-gray-900">Pathify</span>
                </div>
                <div class="text-sm text-gray-600">
                    Career Explorer
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Progress Bar -->
    <div class="bg-white/50 backdrop-blur-sm border-b border-gray-200/50 hidden" id="progressContainer">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-center justify-between mb-2">
                <span class="text-sm font-medium text-gray-700" id="progress-text">Question 1 of 8</span>
                <span class="text-sm text-gray-500" id="step-indicator">Getting to Know You</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
                <div class="progress-bar bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full" 
                     style="width: 12.5%" id="progress-bar"></div>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div id="assessment-container">
            
            <!-- Welcome Screen -->
            <div id="welcome-screen" class="text-center py-16">
                <div class="mb-8">
                    <div class="inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full mb-6">
                        <img src="images/logo.png" alt="Pathify Logo" class="w-12 h-12">
                    </div>
                    <h1 class="text-4xl font-bold text-gray-900 mb-4">Welcome to Your Future! 🚀</h1>
                    <p class="text-xl text-gray-600 max-w-2xl mx-auto">
                        Ready to discover your dream career? Let's explore together! We'll help you find the perfect path 
                        based on your interests, strengths, and goals.
                    </p>
                </div>
                
                <div class="grid md:grid-cols-2 gap-6 max-w-2xl mx-auto mb-8">
                    <div class="bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50">
                        <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4 mx-auto">
                            <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <h3 class="font-semibold text-gray-900 mb-2">Quick & Fun</h3>
                        <p class="text-sm text-gray-600">Just 8 questions, personalized for students like you!</p>
                    </div>
                    
                    <div class="bg-white/70 backdrop-blur-sm rounded-xl p-6 border border-gray-200/50">
                        <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4 mx-auto">
                            <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <h3 class="font-semibold text-gray-900 mb-2">Smart Recommendations</h3>
                        <p class="text-sm text-gray-600">AI-powered career guidance tailored just for you</p>
                    </div>
                </div>
                
                <button onclick="startQuestions()" 
                        class="next-button text-white font-semibold py-4 px-8 rounded-xl text-lg">
                    Let's Explore My Future! ✨
                </button>
            </div>
            
            <!-- Questions Container -->
            <div id="questions-container" class="hidden">
                <!-- Questions will be dynamically inserted here -->
            </div>
            
            <!-- Summary Screen -->
            <div id="summary-screen" class="hidden">
                <div class="text-center mb-8">
                    <div class="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-green-500 to-blue-600 rounded-full mb-6">
                        <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <h2 class="text-3xl font-bold text-gray-900 mb-4">Awesome! Here's Your Profile 🎉</h2>
                    <p class="text-lg text-gray-600">Review your information and make any changes if needed.</p>
                </div>
                
                <div id="summary-content" class="max-w-2xl mx-auto mb-8">
                    <!-- Summary cards will be inserted here -->
                </div>
                
                <div class="text-center">
                    <button onclick="proceedToHomepage()" 
                            class="next-button text-white font-semibold py-4 px-8 rounded-xl text-lg mr-4">
                        Show Me My Career Path! 🚀
                    </button>
                    <button onclick="goBackToEdit()" 
                            class="edit-button font-semibold py-4 px-8 rounded-xl text-lg">
                        Make Changes
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Assessment data
        const assessmentData = {
            currentQuestion: 0,
            totalQuestions: 0,
            responses: {},
            questionFlow: []
        };
        
        // Robot interaction
        let mouseX = 0, mouseY = 0;
        let robotMessages = [
            "Great choice! 👍",
            "Interesting! 🤔",
            "Tell me more! 😊",
            "Nice! Keep going! ⚡",
            "You're doing great! 🌟"
        ];
        
        // Profession data with branching
        const professions = {
            "Engineering": {
                icon: "⚙️",
                branches: ["Computer Science", "Mechanical", "Civil", "Electrical", "Chemical", "Aerospace"],
                nextQuestion: "learning_path"
            },
            "Medicine": {
                icon: "⚕️", 
                branches: ["Doctor", "Surgeon", "Dentist", "Physiotherapist", "Pharmacist", "Nurse"],
                nextQuestion: "learning_path"
            },
            "Technology": {
                icon: "💻",
                branches: ["Software Developer", "Data Scientist", "AI/ML Engineer", "Cybersecurity", "Game Developer", "Web Developer"],
                nextQuestion: "learning_path"
            },
            "Business": {
                icon: "💼",
                branches: ["Marketing", "Finance", "Management", "Entrepreneurship", "Sales", "HR"],
                nextQuestion: "learning_path"
            },
            "Creative Arts": {
                icon: "🎨",
                branches: ["Graphic Designer", "Animator", "Writer", "Photographer", "Filmmaker", "Musician"],
                nextQuestion: "learning_path"
            },
            "Sports": {
                icon: "🏃",
                branches: ["Professional Athlete", "Sports Coach", "Sports Medicine", "Sports Management", "Fitness Trainer", "Sports Journalist"],
                nextQuestion: "learning_path"
            },
            "Science": {
                icon: "🔬",
                branches: ["Research Scientist", "Biotechnology", "Physics", "Chemistry", "Environmental Science", "Space Science"],
                nextQuestion: "learning_path"
            },
            "Teaching": {
                icon: "📚",
                branches: ["School Teacher", "College Professor", "Online Educator", "Special Education", "Educational Technology", "Training & Development"],
                nextQuestion: "learning_path"
            },
            "Law": {
                icon: "⚖️",
                branches: ["Lawyer", "Judge", "Legal Advisor", "Corporate Law", "Criminal Law", "Human Rights"],
                nextQuestion: "learning_path"
            },
            "Social Service": {
                icon: "🤝",
                branches: ["Social Worker", "NGO Worker", "Counselor", "Community Development", "Public Policy", "International Relations"],
                nextQuestion: "learning_path"
            }
        };
        
        // Base questions that always appear
        const baseQuestions = [
            {
                id: 1,
                question: "What's your name?",
                type: "text",
                placeholder: "Enter your full name",
                key: "name",
                required: true
            },
            {
                id: 2,
                question: "How old are you?",
                type: "single_choice",
                key: "age",
                options: ["14-16", "17-18", "19-21", "22-25", "Above 25"],
                required: true
            },
            {
                id: 3,
                question: "Which profession excites you the most? 🌟",
                type: "profession_grid",
                key: "profession",
                options: Object.keys(professions),
                required: true
            }
        ];
        
        // Dynamic questions based on selection
        const dynamicQuestions = {
            profession_branch: {
                question: "Which specialization interests you?",
                type: "single_choice",
                key: "specialization"
            },
            learning_path: {
                question: "How do you prefer to learn and grow?",
                type: "single_choice",
                key: "learning_preference",
                options: [
                    "Traditional College/University",
                    "Online Courses & Self-Learning", 
                    "Hands-on Experience/Internships",
                    "Vocational/Technical Training",
                    "Mentorship & Apprenticeships"
                ]
            },
            companies: {
                question: "Which type of companies inspire you?",
                type: "single_choice", 
                key: "company_preference",
                options: [
                    "Big Tech Companies (Google, Apple, Microsoft)",
                    "Innovative Startups",
                    "Government Organizations",
                    "International NGOs/Non-profits",
                    "Healthcare Institutions",
                    "Educational Institutions",
                    "I want to start my own company!"
                ]
            },
            motivation: {
                question: "What motivates you the most?",
                type: "single_choice",
                key: "motivation",
                options: [
                    "Making a positive impact on society 🌍",
                    "Creative expression and innovation 🎨",
                    "Financial success and stability 💰", 
                    "Recognition and achievements 🏆",
                    "Helping and supporting others 🤝",
                    "Learning new things constantly 📚",
                    "Having work-life balance ⚖️"
                ]
            },
            skills: {
                question: "Which skills do you enjoy using most?",
                type: "single_choice",
                key: "preferred_skills", 
                options: [
                    "Problem-solving and logical thinking 🧠",
                    "Communication and leadership 🗣️",
                    "Creative and artistic abilities 🎨",
                    "Technical and analytical skills 💻",
                    "Helping and caring for others ❤️",
                    "Physical and hands-on work 💪"
                ]
            },
            career_advisor: {
                question: "When making important career decisions, who do you trust most?",
                type: "single_choice",
                key: "trusted_advisor",
                options: [
                    "My parents or family members 👨‍👩‍👧‍👦",
                    "Close friends who know me well 👫", 
                    "Teachers or professors 👩‍🏫",
                    "Professional mentors or career counselors 👨‍💼",
                    "Successful people in my field of interest 🌟",
                    "I prefer to research and decide myself 🔍"
                ]
            },
            work_style: {
                question: "How do you like to work?",
                type: "single_choice",
                key: "work_style",
                options: [
                    "Independently with freedom to decide 🦅",
                    "In small, close-knit teams 👥",
                    "Leading and guiding others 👑",
                    "Following clear instructions and guidelines 📋", 
                    "Collaborating with diverse groups 🌍",
                    "Flexible - depends on the project 🔄"
                ]
            }
        };
        
        function initRobotInteraction() {
            // Mouse tracking for robot eyes
            document.addEventListener('mousemove', function(e) {
                mouseX = (e.clientX / window.innerWidth - 0.5) * 2;
                mouseY = (e.clientY / window.innerHeight - 0.5) * 2;
                
                const leftEye = document.getElementById('leftEye');
                const rightEye = document.getElementById('rightEye');
                
                if (leftEye && rightEye) {
                    // Simple eye movement simulation
                    leftEye.style.transform = `translate(${mouseX * 2}px, ${mouseY * 1}px)`;
                    rightEye.style.transform = `translate(${mouseX * 2}px, ${mouseY * 1}px)`;
                }
            });
            
            // Show welcome message initially
            setTimeout(() => {
                showRobotMessage("Hi! I'm your career guide! 🤖");
            }, 2000);
        }
        
        function showRobotMessage(message) {
            const bubble = document.getElementById('speechBubble');
            if (bubble) {
                bubble.textContent = message;
                bubble.classList.add('show');
                
                setTimeout(() => {
                    bubble.classList.remove('show');
                }, 3000);
            }
        }
        
        function buildQuestionFlow() {
            assessmentData.questionFlow = [...baseQuestions];
            
            // Add dynamic questions based on selections
            const selectedProfession = assessmentData.responses.profession;
            if (selectedProfession && professions[selectedProfession]) {
                // Add specialization question
                assessmentData.questionFlow.push({
                    ...dynamicQuestions.profession_branch,
                    id: 4,
                    options: professions[selectedProfession].branches
                });
                
                // Add remaining questions
                let questionId = 5;
                ['learning_path', 'companies', 'motivation', 'skills', 'career_advisor', 'work_style'].forEach(key => {
                    assessmentData.questionFlow.push({
                        ...dynamicQuestions[key],
                        id: questionId++
                    });
                });
            }
            
            assessmentData.totalQuestions = assessmentData.questionFlow.length;
        }
        
        function startQuestions() {
            console.log('Starting questions...');
            
            // Hide welcome screen
            const welcomeScreen = document.getElementById('welcome-screen');
            const questionsContainer = document.getElementById('questions-container');
            const progressContainer = document.getElementById('progressContainer');
            
            if (welcomeScreen) {
                welcomeScreen.classList.add('hidden');
            }
            
            if (questionsContainer) {
                questionsContainer.classList.remove('hidden');
            }
            
            if (progressContainer) {
                progressContainer.classList.remove('hidden');
            }
            
            buildQuestionFlow();
            showQuestion(0);
            showRobotMessage("Let's get started! 🚀");
        }
        
        function showQuestion(index) {
            console.log('Showing question:', index);
            const question = assessmentData.questionFlow[index];
            const container = document.getElementById('questions-container');
            
            if (!question || !container) {
                console.error('Question or container not found');
                return;
            }
            
            updateProgress(index + 1);
            
            container.innerHTML = `
                <div class="question-card active">
                    <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-8 border border-gray-200/50 max-w-2xl mx-auto">
                        <div class="flex items-center gap-4 mb-6">
                            <div class="question-number">${index + 1}</div>
                        </div>
                        
                        <h2 class="text-2xl font-semibold text-gray-900 mb-8">${question.question}</h2>
                        
                        <div class="mb-8" id="options-container">
                            ${renderQuestion(question)}
                        </div>
                        
                        <div class="flex justify-between items-center pt-6 border-t border-gray-200">
                            <button onclick="previousQuestion()" 
                                    class="px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-all ${index === 0 ? 'invisible' : ''}"
                                    ${index === 0 ? 'disabled' : ''}>
                                Previous
                            </button>
                            
                            <button onclick="nextQuestion()" 
                                    id="next-btn"
                                    class="next-button text-white font-semibold py-3 px-8 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed"
                                    disabled>
                                ${index === assessmentData.questionFlow.length - 1 ? 'Complete Profile! ✨' : 'Next Question →'}
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            setupQuestionListeners(question);
        }
        
        function renderQuestion(question) {
            if (question.type === 'text') {
                return `
                    <input type="text" 
                           id="text-input"
                           class="text-input w-full px-4 py-4 rounded-lg text-lg font-medium"
                           placeholder="${question.placeholder}"
                           style="color: #1f2937 !important; background: white !important;">
                `;
            } else if (question.type === 'profession_grid') {
                return `
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                        ${question.options.map(profession => `
                            <div class="profession-card bg-white rounded-xl p-6 border border-gray-200 text-center" 
                                 data-value="${profession}">
                                <div class="text-3xl mb-3">${professions[profession].icon}</div>
                                <h3 class="font-semibold text-gray-900 text-sm">${profession}</h3>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else if (question.type === 'single_choice') {
                return question.options.map((option, index) => `
                    <div class="option-card bg-white rounded-lg p-4 border border-gray-200 hover:border-blue-300 mb-3" 
                         data-value="${option}" data-index="${index}">
                        <div class="flex items-center space-x-3">
                            <div class="w-5 h-5 border-2 border-gray-300 rounded-full flex items-center justify-center">
                                <div class="w-2.5 h-2.5 bg-blue-600 rounded-full hidden radio-dot"></div>
                            </div>
                            <span class="text-gray-900 font-medium">${option}</span>
                        </div>
                    </div>
                `).join('');
            }
        }
        
        function setupQuestionListeners(question) {
            const nextBtn = document.getElementById('next-btn');
            
            if (question.type === 'text') {
                const input = document.getElementById('text-input');
                if (input) {
                    input.addEventListener('input', () => {
                        assessmentData.responses[question.key] = input.value;
                        nextBtn.disabled = input.value.trim() === '';
                    });
                    
                    // Handle Enter key
                    input.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter' && input.value.trim() !== '') {
                            nextQuestion();
                        }
                    });
                    
                    // Auto-focus
                    input.focus();
                }
            } else if (question.type === 'profession_grid') {
                const cards = document.querySelectorAll('.profession-card');
                cards.forEach(card => {
                    card.addEventListener('click', () => {
                        cards.forEach(c => c.classList.remove('selected'));
                        card.classList.add('selected');
                        assessmentData.responses[question.key] = card.dataset.value;
                        nextBtn.disabled = false;
                        
                        // Rebuild flow with new profession selection
                        buildQuestionFlow();
                        showRobotMessage(robotMessages[Math.floor(Math.random() * robotMessages.length)]);
                    });
                });
            } else if (question.type === 'single_choice') {
                const options = document.querySelectorAll('.option-card');
                options.forEach(option => {
                    option.addEventListener('click', () => {
                        options.forEach(opt => {
                            opt.classList.remove('selected');
                            const dot = opt.querySelector('.radio-dot');
                            if (dot) dot.classList.add('hidden');
                        });
                        option.classList.add('selected');
                        const dot = option.querySelector('.radio-dot');
                        if (dot) dot.classList.remove('hidden');
                        assessmentData.responses[question.key] = option.dataset.value;
                        nextBtn.disabled = false;
                        showRobotMessage(robotMessages[Math.floor(Math.random() * robotMessages.length)]);
                    });
                });
            }
        }
        
        function updateProgress(current) {
            assessmentData.currentQuestion = current;
            const progressPercent = (current / assessmentData.totalQuestions) * 100;
            const progressText = document.getElementById('progress-text');
            const progressBar = document.getElementById('progress-bar');
            
            if (progressText) {
                progressText.textContent = `Question ${current} of ${assessmentData.totalQuestions}`;
            }
            if (progressBar) {
                progressBar.style.width = `${progressPercent}%`;
            }
        }
        
        function previousQuestion() {
            if (assessmentData.currentQuestion > 1) {
                showQuestion(assessmentData.currentQuestion - 2);
            }
        }
        
        function nextQuestion() {
            if (assessmentData.currentQuestion < assessmentData.totalQuestions) {
                showQuestion(assessmentData.currentQuestion);
            } else {
                showSummary();
            }
        }
        
        function showSummary() {
            document.getElementById('questions-container').classList.add('hidden');
            document.getElementById('summary-screen').classList.remove('hidden');
            document.getElementById('progressContainer').classList.add('hidden');
            
            const summaryContent = document.getElementById('summary-content');
            summaryContent.innerHTML = '';
            
            Object.entries(assessmentData.responses).forEach(([key, value]) => {
                const question = assessmentData.questionFlow.find(q => q.key === key);
                if (question) {
                    const card = document.createElement('div');
                    card.className = 'summary-card';
                    card.innerHTML = `
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <h3 class="font-semibold text-gray-900 mb-2">${question.question}</h3>
                                <p class="text-gray-700 text-lg">${value}</p>
                            </div>
                            <button class="edit-button ml-4" onclick="editResponse('${key}')">
                                Edit ✏️
                            </button>
                        </div>
                    `;
                    summaryContent.appendChild(card);
                }
            });
            
            showRobotMessage("Perfect! Ready to explore? 🌟");
        }
        
        function editResponse(key) {
            const questionIndex = assessmentData.questionFlow.findIndex(q => q.key === key);
            if (questionIndex !== -1) {
                showQuestion(questionIndex);
                document.getElementById('summary-screen').classList.add('hidden');
                document.getElementById('questions-container').classList.remove('hidden');
                document.getElementById('progressContainer').classList.remove('hidden');
            }
        }
        
        function goBackToEdit() {
            showQuestion(0);
            document.getElementById('summary-screen').classList.add('hidden');
            document.getElementById('questions-container').classList.remove('hidden');
            document.getElementById('progressContainer').classList.remove('hidden');
        }
        
        function proceedToHomepage() {
            // Store responses in localStorage
            localStorage.setItem('pathify_user_profile', JSON.stringify(assessmentData.responses));
            showRobotMessage("Let's go! Your future awaits! 🚀");
            
            setTimeout(() => {
                window.location.href = 'ksarth-chat.html';
            }, 1500);
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing...');
            initRobotInteraction();
        });
    </script>
</body>
</html>